<% if (isLoggedIn) { %>
    <div class="dropdown">
      <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
        <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">
        <strong><%= user.id %></strong>
      </a>
      <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
        <li><a class="dropdown-item" href="#">My dreams</a></li>
        <li><a class="dropdown-item" href="#">Settings</a></li>
        <li><a class="dropdown-item" href="#">Profile</a></li>
        <li><hr class="dropdown-divider"></li>
        <li>
            <a class="dropdown-item" id="logoutbutton">Sign out</a>
        </li>
      </ul>
    </div>
  <% } else { %>
    <a class="btn btn-sm btn-outline-secondary" href="/signup">Sign in</a>
  <% } %>
  
  <script>  
  document.getElementById('logoutbutton').addEventListener('click', async (e) => {
    e.preventDefault();
    const res = await fetch('/logout', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      }
    });
    if (res.ok) {
      console.log("Logout successful");
      window.location.reload();
    } else {
      console.error('Logout failed');
    }
  });
</script>